(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{253:function(e,t,a){e.exports=a(254)},254:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a(4),o=a(9),r=a(16),s=a(8),c=a(15),l=a(122),h=a.n(l),d=a(229),p=a.n(d),u=a(230),g=a.n(u),m=(a(261),a(298)),f=["shirt, blouse","top, t-shirt, sweatshirt","sweater","cardigan","jacket","vest","pants","shorts","skirt","coat","dress","jumpsuit","cape","glasses","hat","headband, head covering, hair accessory","tie","glove","watch","belt","leg warmer","tights, stockings","sock","shoe","bag, wallet","scarf","umbrella","hood","collar","lapel","epaulette","sleeve","pocket","neckline","buckle","zipper","applique","bead","bow","flower","fringe","ribbon","rivet","ruffle","sequin","tassel"],v=function(e){function t(){var e,a;Object(i.a)(this,t);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(a=Object(r.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={model:null,preview:"",predictions:[]},a.onDrop=function(e,t,n){a.setState({preview:e[0].preview||n[0]})},a.cropToCanvas=function(e,t,a){var n=e.naturalWidth,i=e.naturalHeight;a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="#000000",a.fillRect(0,0,t.width,t.height);var o=Math.min(t.width/e.naturalWidth,t.height/e.naturalHeight),r=Math.round(n*o),s=Math.round(i*o);a.drawImage(e,0,0,n,i,(t.width-r)/2,(t.height-s)/2,r,s)},a.onImageChange=function(e){var t=document.getElementById("canvas"),i=t.getContext("2d");a.cropToCanvas(e.target,t,i);var o=a.state.model.inputs[0].shape.slice(1,3),r=Object(n.a)(o,2),s=r[0],c=r[1],l=m.tidy(function(){return m.image.resizeBilinear(m.browser.fromPixels(t),[s,c]).div(255).expandDims(0)});a.state.model.executeAsync(l).then(function(e){var a="16px sans-serif";i.font=a,i.textBaseline="top";var o,r=Object(n.a)(e,4),s=r[0],c=r[1],l=r[2],h=r[3],d=s.dataSync(),p=c.dataSync(),u=l.dataSync(),g=h.dataSync()[0];for(m.dispose(e),o=0;o<g;++o){var v=d.slice(4*o,4*(o+1)),w=Object(n.a)(v,4),b=w[0],y=w[1],j=w[2],k=w[3];b*=t.width,j*=t.width,y*=t.height;var x=j-b,F=(k*=t.height)-y,S=f[u[o]],D=p[o].toFixed(2);i.strokeStyle="#00FFFF",i.lineWidth=4,i.strokeRect(b,y,x,F),i.fillStyle="#00FFFF";var O=i.measureText(S+":"+D).width,E=parseInt(a,10);i.fillRect(b,y,O+4,E+4)}for(o=0;o<g;++o){var C=d.slice(4*o,4*(o+1)),z=Object(n.a)(C,3),I=z[0],M=z[1];I*=t.width,M*=t.height;var B=f[u[o]],N=p[o].toFixed(2);i.fillStyle="#000000",i.fillText(B+":"+N,I,M)}})},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;m.loadGraphModel("/web_model/model.json").then(function(t){e.setState({model:t})})}},{key:"render",value:function(){return h.a.createElement("div",{className:"Dropzone-page"},this.state.model?h.a.createElement(g.a,{className:"Dropzone",accept:"image/jpeg, image/png, .jpg, .jpeg, .png",multiple:!1,onDrop:this.onDrop},this.state.preview?h.a.createElement("img",{alt:"upload preview",onLoad:this.onImageChange,className:"Dropzone-img",src:this.state.preview}):"Choose or drop a file.",h.a.createElement("canvas",{id:"canvas",width:"640",height:"640"})):h.a.createElement("div",{className:"Dropzone"},"Loading model..."))}}]),t}(h.a.Component),w=document.getElementById("root");p.a.render(h.a.createElement(v,null),w)},261:function(e,t,a){},267:function(e,t){},268:function(e,t){},276:function(e,t){},286:function(e,t){},287:function(e,t){},288:function(e,t){},289:function(e,t){},297:function(e,t){}},[[253,2,1]]]);
//# sourceMappingURL=main.d8ee4e3c.chunk.js.map