{"map":"{\"version\":3,\"sources\":[\"C:/PythonProjects/For GIt/FashionDetect/src/index.js\"],\"names\":[\"tf\",\"require\",\"names\",\"App\",\"state\",\"model\",\"preview\",\"predictions\",\"onDrop\",\"accepted\",\"rejected\",\"links\",\"_this\",\"setState\",\"cropToCanvas\",\"image\",\"canvas\",\"ctx\",\"naturalWidth\",\"naturalHeight\",\"clearRect\",\"width\",\"height\",\"fillStyle\",\"fillRect\",\"ratio\",\"Math\",\"min\",\"newWidth\",\"round\",\"newHeight\",\"drawImage\",\"onImageChange\",\"e\",\"c\",\"document\",\"getElementById\",\"getContext\",\"target\",\"_this$state$model$inp\",\"inputs\",\"shape\",\"slice\",\"_this$state$model$inp2\",\"Object\",\"C_PythonProjects_For_GIt_FashionDetect_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__\",\"modelWidth\",\"modelHeight\",\"input\",\"tidy\",\"resizeBilinear\",\"browser\",\"fromPixels\",\"div\",\"expandDims\",\"executeAsync\",\"then\",\"res\",\"font\",\"textBaseline\",\"i\",\"_res\",\"boxes\",\"scores\",\"classes\",\"valid_detections\",\"boxes_data\",\"dataSync\",\"scores_data\",\"classes_data\",\"valid_detections_data\",\"dispose\",\"_boxes_data$slice\",\"_boxes_data$slice2\",\"x1\",\"y1\",\"x2\",\"y2\",\"klass\",\"score\",\"toFixed\",\"strokeStyle\",\"lineWidth\",\"strokeRect\",\"textWidth\",\"measureText\",\"textHeight\",\"parseInt\",\"_boxes_data$slice3\",\"_boxes_data$slice4\",\"fillText\",\"_this2\",\"this\",\"loadGraphModel\",\"react__WEBPACK_IMPORTED_MODULE_6___default\",\"a\",\"createElement\",\"className\",\"react_magic_dropzone__WEBPACK_IMPORTED_MODULE_8___default\",\"accept\",\"multiple\",\"alt\",\"onLoad\",\"src\",\"id\",\"React\",\"Component\",\"rootElement\",\"ReactDOM\",\"render\"],\"mappings\":\"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\",\"sourcesContent\":[\"import React from \\\"react\\\";\\r\\nimport ReactDOM from \\\"react-dom\\\";\\r\\nimport MagicDropzone from \\\"react-magic-dropzone\\\";\\r\\n\\r\\nimport \\\"./styles.css\\\";\\r\\nconst tf = require(\\\"@tensorflow/tfjs\\\");\\r\\n\\r\\nconst weights = \\\"/web_model/model.json\\\";\\r\\n\\r\\nconst names = [\\r\\n  \\\"shirt, blouse\\\",\\r\\n  \\\"top, t-shirt, sweatshirt\\\",\\r\\n  \\\"sweater\\\",\\r\\n  \\\"cardigan\\\",\\r\\n  \\\"jacket\\\",\\r\\n  \\\"vest\\\",\\r\\n  \\\"pants\\\",\\r\\n  \\\"shorts\\\",\\r\\n  \\\"skirt\\\",\\r\\n  \\\"coat\\\",\\r\\n  \\\"dress\\\",\\r\\n  \\\"jumpsuit\\\",\\r\\n  \\\"cape\\\",\\r\\n  \\\"glasses\\\",\\r\\n  \\\"hat\\\",\\r\\n  \\\"headband, head covering, hair accessory\\\",\\r\\n  \\\"tie\\\",\\r\\n  \\\"glove\\\",\\r\\n  \\\"watch\\\",\\r\\n  \\\"belt\\\",\\r\\n  \\\"leg warmer\\\",\\r\\n  \\\"tights, stockings\\\",\\r\\n  \\\"sock\\\",\\r\\n  \\\"shoe\\\",\\r\\n  \\\"bag, wallet\\\",\\r\\n  \\\"scarf\\\",\\r\\n  \\\"umbrella\\\",\\r\\n  \\\"hood\\\",\\r\\n  \\\"collar\\\",\\r\\n  \\\"lapel\\\",\\r\\n  \\\"epaulette\\\",\\r\\n  \\\"sleeve\\\",\\r\\n  \\\"pocket\\\",\\r\\n  \\\"neckline\\\",\\r\\n  \\\"buckle\\\",\\r\\n  \\\"zipper\\\",\\r\\n  \\\"applique\\\",\\r\\n  \\\"bead\\\",\\r\\n  \\\"bow\\\",\\r\\n  \\\"flower\\\",\\r\\n  \\\"fringe\\\",\\r\\n  \\\"ribbon\\\",\\r\\n  \\\"rivet\\\",\\r\\n  \\\"ruffle\\\",\\r\\n  \\\"sequin\\\",\\r\\n  \\\"tassel\\\",\\r\\n];\\r\\n\\r\\nclass App extends React.Component {\\r\\n  state = {\\r\\n    model: null,\\r\\n    preview: \\\"\\\",\\r\\n    predictions: [],\\r\\n  };\\r\\n\\r\\n  componentDidMount() {\\r\\n    tf.loadGraphModel(weights).then((model) => {\\r\\n      this.setState({\\r\\n        model: model,\\r\\n      });\\r\\n    });\\r\\n  }\\r\\n\\r\\n  onDrop = (accepted, rejected, links) => {\\r\\n    this.setState({ preview: accepted[0].preview || links[0] });\\r\\n  };\\r\\n\\r\\n  cropToCanvas = (image, canvas, ctx) => {\\r\\n    const naturalWidth = image.naturalWidth;\\r\\n    const naturalHeight = image.naturalHeight;\\r\\n\\r\\n    // canvas.width = image.width;\\r\\n    // canvas.height = image.height;\\r\\n\\r\\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\\r\\n    ctx.fillStyle = \\\"#000000\\\";\\r\\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\\r\\n    const ratio = Math.min(\\r\\n      canvas.width / image.naturalWidth,\\r\\n      canvas.height / image.naturalHeight\\r\\n    );\\r\\n    const newWidth = Math.round(naturalWidth * ratio);\\r\\n    const newHeight = Math.round(naturalHeight * ratio);\\r\\n    ctx.drawImage(\\r\\n      image,\\r\\n      0,\\r\\n      0,\\r\\n      naturalWidth,\\r\\n      naturalHeight,\\r\\n      (canvas.width - newWidth) / 2,\\r\\n      (canvas.height - newHeight) / 2,\\r\\n      newWidth,\\r\\n      newHeight\\r\\n    );\\r\\n  };\\r\\n\\r\\n  onImageChange = (e) => {\\r\\n    const c = document.getElementById(\\\"canvas\\\");\\r\\n    const ctx = c.getContext(\\\"2d\\\");\\r\\n    this.cropToCanvas(e.target, c, ctx);\\r\\n    let [modelWidth, modelHeight] = this.state.model.inputs[0].shape.slice(\\r\\n      1,\\r\\n      3\\r\\n    );\\r\\n    const input = tf.tidy(() => {\\r\\n      return tf.image\\r\\n        .resizeBilinear(tf.browser.fromPixels(c), [modelWidth, modelHeight])\\r\\n        .div(255.0)\\r\\n        .expandDims(0);\\r\\n    });\\r\\n    this.state.model.executeAsync(input).then((res) => {\\r\\n      // Font options.\\r\\n      const font = \\\"16px sans-serif\\\";\\r\\n      ctx.font = font;\\r\\n      ctx.textBaseline = \\\"top\\\";\\r\\n\\r\\n      const [boxes, scores, classes, valid_detections] = res;\\r\\n      const boxes_data = boxes.dataSync();\\r\\n      const scores_data = scores.dataSync();\\r\\n      const classes_data = classes.dataSync();\\r\\n      const valid_detections_data = valid_detections.dataSync()[0];\\r\\n\\r\\n      tf.dispose(res);\\r\\n\\r\\n      var i;\\r\\n      for (i = 0; i < valid_detections_data; ++i) {\\r\\n        let [x1, y1, x2, y2] = boxes_data.slice(i * 4, (i + 1) * 4);\\r\\n        x1 *= c.width;\\r\\n        x2 *= c.width;\\r\\n        y1 *= c.height;\\r\\n        y2 *= c.height;\\r\\n        const width = x2 - x1;\\r\\n        const height = y2 - y1;\\r\\n        const klass = names[classes_data[i]];\\r\\n        const score = scores_data[i].toFixed(2);\\r\\n\\r\\n        // Draw the bounding box.\\r\\n        ctx.strokeStyle = \\\"#00FFFF\\\";\\r\\n        ctx.lineWidth = 4;\\r\\n        ctx.strokeRect(x1, y1, width, height);\\r\\n\\r\\n        // Draw the label background.\\r\\n        ctx.fillStyle = \\\"#00FFFF\\\";\\r\\n        const textWidth = ctx.measureText(klass + \\\":\\\" + score).width;\\r\\n        const textHeight = parseInt(font, 10); // base 10\\r\\n        ctx.fillRect(x1, y1, textWidth + 4, textHeight + 4);\\r\\n      }\\r\\n      for (i = 0; i < valid_detections_data; ++i) {\\r\\n        let [x1, y1, ,] = boxes_data.slice(i * 4, (i + 1) * 4);\\r\\n        x1 *= c.width;\\r\\n        y1 *= c.height;\\r\\n        const klass = names[classes_data[i]];\\r\\n        const score = scores_data[i].toFixed(2);\\r\\n\\r\\n        // Draw the text last to ensure it's on top.\\r\\n        ctx.fillStyle = \\\"#000000\\\";\\r\\n        ctx.fillText(klass + \\\":\\\" + score, x1, y1);\\r\\n      }\\r\\n    });\\r\\n  };\\r\\n\\r\\n  render() {\\r\\n    return (\\r\\n      <div className=\\\"Dropzone-page\\\">\\r\\n        {this.state.model ? (\\r\\n          <MagicDropzone\\r\\n            className=\\\"Dropzone\\\"\\r\\n            accept=\\\"image/jpeg, image/png, .jpg, .jpeg, .png\\\"\\r\\n            multiple={false}\\r\\n            onDrop={this.onDrop}\\r\\n          >\\r\\n            {this.state.preview ? (\\r\\n              <img\\r\\n                alt=\\\"upload preview\\\"\\r\\n                onLoad={this.onImageChange}\\r\\n                className=\\\"Dropzone-img\\\"\\r\\n                src={this.state.preview}\\r\\n              />\\r\\n            ) : (\\r\\n              \\\"Choose or drop a file.\\\"\\r\\n            )}\\r\\n            <canvas id=\\\"canvas\\\" width=\\\"640\\\" height=\\\"640\\\" />\\r\\n          </MagicDropzone>\\r\\n        ) : (\\r\\n          <div className=\\\"Dropzone\\\">Loading model...</div>\\r\\n        )}\\r\\n      </div>\\r\\n    );\\r\\n  }\\r\\n}\\r\\n\\r\\nconst rootElement = document.getElementById(\\\"root\\\");\\r\\nReactDOM.render(<App />, rootElement);\\r\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{253:function(e,t,a){e.exports=a(254)},254:function(e,t,a){\"use strict\";a.r(t);var n=a(3),i=a(4),o=a(9),r=a(16),s=a(8),c=a(15),l=a(122),h=a.n(l),d=a(229),p=a.n(d),u=a(230),g=a.n(u),m=(a(261),a(298)),f=[\"shirt, blouse\",\"top, t-shirt, sweatshirt\",\"sweater\",\"cardigan\",\"jacket\",\"vest\",\"pants\",\"shorts\",\"skirt\",\"coat\",\"dress\",\"jumpsuit\",\"cape\",\"glasses\",\"hat\",\"headband, head covering, hair accessory\",\"tie\",\"glove\",\"watch\",\"belt\",\"leg warmer\",\"tights, stockings\",\"sock\",\"shoe\",\"bag, wallet\",\"scarf\",\"umbrella\",\"hood\",\"collar\",\"lapel\",\"epaulette\",\"sleeve\",\"pocket\",\"neckline\",\"buckle\",\"zipper\",\"applique\",\"bead\",\"bow\",\"flower\",\"fringe\",\"ribbon\",\"rivet\",\"ruffle\",\"sequin\",\"tassel\"],v=function(e){function t(){var e,a;Object(i.a)(this,t);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(a=Object(r.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={model:null,preview:\"\",predictions:[]},a.onDrop=function(e,t,n){a.setState({preview:e[0].preview||n[0]})},a.cropToCanvas=function(e,t,a){var n=e.naturalWidth,i=e.naturalHeight;a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle=\"#000000\",a.fillRect(0,0,t.width,t.height);var o=Math.min(t.width/e.naturalWidth,t.height/e.naturalHeight),r=Math.round(n*o),s=Math.round(i*o);a.drawImage(e,0,0,n,i,(t.width-r)/2,(t.height-s)/2,r,s)},a.onImageChange=function(e){var t=document.getElementById(\"canvas\"),i=t.getContext(\"2d\");a.cropToCanvas(e.target,t,i);var o=a.state.model.inputs[0].shape.slice(1,3),r=Object(n.a)(o,2),s=r[0],c=r[1],l=m.tidy(function(){return m.image.resizeBilinear(m.browser.fromPixels(t),[s,c]).div(255).expandDims(0)});a.state.model.executeAsync(l).then(function(e){var a=\"16px sans-serif\";i.font=a,i.textBaseline=\"top\";var o,r=Object(n.a)(e,4),s=r[0],c=r[1],l=r[2],h=r[3],d=s.dataSync(),p=c.dataSync(),u=l.dataSync(),g=h.dataSync()[0];for(m.dispose(e),o=0;o<g;++o){var v=d.slice(4*o,4*(o+1)),w=Object(n.a)(v,4),b=w[0],y=w[1],j=w[2],k=w[3];b*=t.width,j*=t.width,y*=t.height;var x=j-b,F=(k*=t.height)-y,S=f[u[o]],D=p[o].toFixed(2);i.strokeStyle=\"#00FFFF\",i.lineWidth=4,i.strokeRect(b,y,x,F),i.fillStyle=\"#00FFFF\";var O=i.measureText(S+\":\"+D).width,E=parseInt(a,10);i.fillRect(b,y,O+4,E+4)}for(o=0;o<g;++o){var C=d.slice(4*o,4*(o+1)),z=Object(n.a)(C,3),I=z[0],M=z[1];I*=t.width,M*=t.height;var B=f[u[o]],N=p[o].toFixed(2);i.fillStyle=\"#000000\",i.fillText(B+\":\"+N,I,M)}})},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:\"componentDidMount\",value:function(){var e=this;m.loadGraphModel(\"/web_model/model.json\").then(function(t){e.setState({model:t})})}},{key:\"render\",value:function(){return h.a.createElement(\"div\",{className:\"Dropzone-page\"},this.state.model?h.a.createElement(g.a,{className:\"Dropzone\",accept:\"image/jpeg, image/png, .jpg, .jpeg, .png\",multiple:!1,onDrop:this.onDrop},this.state.preview?h.a.createElement(\"img\",{alt:\"upload preview\",onLoad:this.onImageChange,className:\"Dropzone-img\",src:this.state.preview}):\"Choose or drop a file.\",h.a.createElement(\"canvas\",{id:\"canvas\",width:\"640\",height:\"640\"})):h.a.createElement(\"div\",{className:\"Dropzone\"},\"Loading model...\"))}}]),t}(h.a.Component),w=document.getElementById(\"root\");p.a.render(h.a.createElement(v,null),w)},261:function(e,t,a){},267:function(e,t){},268:function(e,t){},276:function(e,t){},286:function(e,t){},287:function(e,t){},288:function(e,t){},289:function(e,t){},297:function(e,t){}},[[253,2,1]]]);","extractedComments":[]}